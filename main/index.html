<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" href="../img/favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon" />
  <title>newListDemo</title>
  <link href="../css/bootstrap.css" rel="stylesheet" type="text/css" />
  <link href="../css/default.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div class="col-sm-offset-3 col-sm-6 col-md-offset-4  col-md-4 col-xs-12" id="fun_new">
    <div class="header fixheader">
      <div class="input-group col-xs-8 pull-right">
          <input type="text" placeholder="请输入想要搜索的内容" id="looKey"/>
          <label class="input-group-addon glyphicon glyphicon-search searchIcon"></label>
      </div>
    </div>
    <div class="showNew" id="showN">
        <ul class="list-group">
          <li class="list-group-item col-xs-12"  v-for="(item,index) in newT" :id="'new-' + index">
            <a class="newlist" @click="godetail(item)">
              <span class="col-xs-2 newListLeft">
                <p class="lead h3">{{item.name.substring(0,1)}}</p>
              </span>
              <span class="col-xs-10">
                新闻发布时间：<span class="text-muted">{{item.upTime}}<br/></span>
                <p class="h4 help-block">{{item.name}}<br/></p>
                <p class="h5 help-block">{{item.newTest.substring(0,20)}}<br/></p>
                <span class="row help-block">
                  <span class="col-xs-3 glyphicon glyphicon-thumbs-up text-nowrap" @click.stop="toggle(item,'loveNum','checkedL')" :class="{'checked-G':(selectNew==item.newId)&&checkM.checkedL}">{{item.loveNum}}</span>
                  <span class="col-xs-3 glyphicon glyphicon-thumbs-down text-nowrap"  @click.stop="toggle(item,'hateNum','checkedH')" :class="{'checked-G':(selectNew==item.newId)&&checkM.checkedH}">{{item.hateNum}}</span>
                  <span class="col-xs-6 text-nowrap"  @click.stop="++item.visitNum">阅读量({{item.visitNum}})</span>
                </span>


              </span>
            </a>
          </li>
          <p class="col-xs-12 text-center last-p">我是有底线的</p>
          <p class="col-xs-12" v-show="!newT.length">新闻列表为空</p>
        </ul>
    </div>
    <div class="footer fixBottom" id="foot">
      <ul class="nav">
        <li class="col-xs-3 glyphicon" v-for="fname in footer" :class="fname.icon" v-text="fname.text" @click="goUrl(fname.url)"></li>
      </ul>
    </div>
  </div>
</body>
<script src="../js/vue2.js" type="text/javascript"></script>
<script src="../js/default.js" type="text/javascript"></script>
<script src="../js/getData.js" type="text/javascript"></script>
<script>
'use strict';

var vm = new Vue({
    el:'#fun_new',
    ready:function(){

        //this.getAll('quantity','totalQuantity');//一进入页面计算总数
        //this.getAll('price','totalPrice');
    },
    components: {

    },
    watch:{//监控数组变化,再次计算总数
    },
    data:function(){
        return {
            newT :getIndexData(),
            isObj :false,
            img:[
              {src:"../img/view_01.jpg"},
              {src:"../img/view_02.jpg"},
              {src:"../img/view_03.jpg"}
            ],
            checkM:{
              "checkedL":false,
              "checkedH":false
            },
            footer:
            [
              {text:" 主页",icon:"glyphicon-home",url:"index.html"},
              {text:" 美图",icon:"glyphicon-camera text-muted",url:"pic.html"},
              {text:" 心情",icon:"glyphicon-tag text-muted",url:"mood.html"},
              {text:" 设置",icon:"glyphicon-cog text-muted",url:"setting.html"},
            ],
            selectNew:""
        }//
    },
    methods:{
      goUrl:function (url) {
        //alert(item.newId);
        window.location.href =url;
      },
      goBack:function(){
      	window.history.back();
      },
      godetail:function (item) {
        //alert(item.newId);
        window.location.href ="../detail/newdetail.html?newid="+item.newId;
      },
      toggle:function (item,paraNum,paracheck) {
        /*
        *@parameter item 获取当前的item
        *@parameter paraNum 获取当前的item对应那个属性值
        *@parameter paracheck 获取当前的item对应那个确认状态
        */
        this.selectNew = item.newId;
        for(var i in this.newT){
          if(this.newT[i].newId.indexOf(item.newId)>-1){
            if(paracheck=="checkedL"&&paraNum=="loveNum"){
                this.checkM.checkedL=!this.checkM.checkedL;
                if(this.checkM.checkedL){
                  ++this.newT[i].loveNum;
                }else {
                  --this.newT[i].loveNum;
                }
            }else if(paracheck=="checkedH"&&paraNum=="hateNum"){
                this.checkM.checkedH=!this.checkM.checkedH;
                if(this.checkM.checkedH){
                  ++this.newT[i].hateNum;
                }else {
                  --this.newT[i].hateNum;
                }
            }
          }

        }

      }

    }
});

</script>
</html>
